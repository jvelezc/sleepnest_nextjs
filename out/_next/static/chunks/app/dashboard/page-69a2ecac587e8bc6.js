(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{8714:function(e,s,t){Promise.resolve().then(t.bind(t,9345))},9345:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var i=t(7437),a=t(2265),l=t(4033),r=t(5750),c=t(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,c.Z)("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),d=(0,c.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var x=t(2176),o=t(7918),m=t(6841),h=t(4863),u=t(6763),f=t(6110),j=t(3023),g=t(9401);function v(){let e=(0,l.useRouter)(),{user:s}=(0,h.a)(),[t,c]=(0,a.useState)([]),[v,p]=(0,a.useState)(!0),[N,y]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[_,k]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async function(){if(!s){p(!1);return}try{y(null);let{data:e,error:t}=await u.OQ.from("specialists").select("id").eq("auth_user_id",s.id).single();if(t)throw t;e&&w(e.id)}catch(e){console.error("Error fetching specialist ID:",e),y("Failed to fetch specialist data")}finally{p(!1)}})()},[s]),(0,a.useEffect)(()=>{(async function(){if(b)try{p(!0),y(null);let{data:e,error:s}=await u.OQ.rpc("get_specialist_caregivers",{p_specialist_id:b,p_sort_field:"last_activity",p_sort_order:"desc",p_limit:9,p_offset:0});if(s)throw s;c(e||[])}catch(e){console.error("Error loading caregivers:",e),y("Failed to load caregivers")}finally{p(!1)}})()},[b]),v)?(0,i.jsxs)("div",{className:"flex-1 p-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Sleep Specialist Dashboard"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Manage your clients and track their progress"})]}),(0,i.jsx)(m.W,{})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Your Caregivers"}),(0,i.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[void 0,void 0,void 0].map((e,s)=>(0,i.jsxs)(f.Zb,{className:"animate-pulse",children:[(0,i.jsxs)(f.Ol,{className:"space-y-4",children:[(0,i.jsx)("div",{className:"h-4 bg-muted rounded w-3/4"}),(0,i.jsx)("div",{className:"h-3 bg-muted rounded w-1/2"})]}),(0,i.jsx)(f.aY,{children:(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("div",{className:"h-3 bg-muted rounded"}),(0,i.jsx)("div",{className:"h-3 bg-muted rounded w-5/6"})]})})]},s))})]})]}):0===t.length?(0,i.jsxs)("div",{className:"flex-1 p-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Sleep Specialist Dashboard"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Manage your clients and track their progress"})]}),(0,i.jsx)(m.W,{})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Your Caregivers"}),(0,i.jsx)("div",{className:"rounded-lg border bg-card p-8",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,i.jsx)("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:(0,i.jsx)(r.Z,{className:"h-6 w-6 text-primary"})}),(0,i.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"Welcome to Your Dashboard"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-2 max-w-sm",children:"You haven't added any caregivers yet. Start growing your practice by inviting your first caregiver."}),(0,i.jsx)(m.W,{})]})})]})]}):(0,i.jsxs)("div",{className:"flex-1 p-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Sleep Specialist Dashboard"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Welcome back! Here's an overview of your practice"})]}),(0,i.jsx)(m.W,{})]}),(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mb-8",children:[(0,i.jsxs)(f.Zb,{children:[(0,i.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(f.ll,{className:"text-sm font-medium",children:"Total Clients"}),(0,i.jsx)(r.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,i.jsxs)(f.aY,{children:[(0,i.jsx)("div",{className:"text-2xl font-bold",children:t.length}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active clients in your practice"})]})]}),(0,i.jsxs)(f.Zb,{children:[(0,i.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(f.ll,{className:"text-sm font-medium",children:"Recent Activity"}),(0,i.jsx)(n,{className:"h-4 w-4 text-muted-foreground"})]}),(0,i.jsxs)(f.aY,{children:[(0,i.jsx)("div",{className:"text-2xl font-bold",children:t.filter(e=>{let s=new Date(e.last_activity),t=new Date;return t.getTime()-s.getTime()<864e5}).length}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:"Clients active in last 24h"})]})]}),(0,i.jsxs)(f.Zb,{children:[(0,i.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(f.ll,{className:"text-sm font-medium",children:"New Clients"}),(0,i.jsx)(d,{className:"h-4 w-4 text-muted-foreground"})]}),(0,i.jsxs)(f.aY,{children:[(0,i.jsx)("div",{className:"text-2xl font-bold",children:t.filter(e=>{let s=new Date(e.last_activity),t=new Date;return t.getTime()-s.getTime()<6048e5}).length}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:"New clients this week"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Recent Activity"}),(0,i.jsx)(j.z,{variant:"outline",onClick:()=>e.push("/dashboard/clients"),children:"View All Clients"})]}),(0,i.jsx)(f.Zb,{children:(0,i.jsx)(f.aY,{className:"p-0",children:(0,i.jsx)("div",{className:"divide-y",children:t.sort((e,s)=>new Date(s.last_activity).getTime()-new Date(e.last_activity).getTime()).slice(0,5).map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium leading-none",children:e.caregiver_name}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last active ",(0,o.ZP)(new Date(e.last_activity),"MMM d, h:mm a")]})]}),(0,i.jsxs)(j.z,{variant:"ghost",size:"sm",className:"flex items-center gap-2",onClick:()=>{b&&k({specialistId:b,caregiverId:e.caregiver_id,caregiverName:e.caregiver_name})},children:[(0,i.jsx)(x.Z,{className:"h-4 w-4"}),"Chat"]})]},e.caregiver_id))})})})]}),_&&(0,i.jsx)(g.z,{specialistId:_.specialistId,caregiverId:_.caregiverId,caregiverName:_.caregiverName,onClose:()=>k(null)})]})}},4033:function(e,s,t){e.exports=t(290)}},function(e){e.O(0,[586,233,217,312,70,841,971,864,744],function(){return e(e.s=8714)}),_N_E=e.O()}]);