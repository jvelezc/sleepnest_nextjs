(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{9057:function(e,s,a){"use strict";a.d(s,{Z:function(){return i}});var t=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},6538:function(e,s,a){"use strict";a.d(s,{Z:function(){return i}});var t=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},1827:function(e,s,a){"use strict";a.d(s,{Z:function(){return i}});var t=a(5531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},390:function(e,s,a){Promise.resolve().then(a.bind(a,1084))},1084:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return N}});var t=a(7437),i=a(2265),r=a(6538),l=a(1827),n=a(9057),c=a(1295),d=a(6141),u=a(2176),o=a(9314),m=a(4863),x=a(6763),h=a(6110),f=a(1908),v=a(3023),p=a(9401),j=a(9155),g=a(8094);function N(){let{user:e}=(0,m.a)(),[s,a]=(0,i.useState)([]),[N,y]=(0,i.useState)([]),[b,_]=(0,i.useState)(!0),[w,C]=(0,i.useState)(null),[S,Z]=(0,i.useState)(null),[k,z]=(0,i.useState)(null),[E,I]=(0,i.useState)(""),[L,O]=(0,i.useState)("name"),[P,q]=(0,i.useState)(1);(0,i.useEffect)(()=>{(async function(){if(!e){_(!1);return}try{C(null);let{data:s,error:a}=await x.OQ.from("caregivers").select("id").eq("auth_user_id",e.id).single();if(a)throw a;s&&Z(s.id)}catch(e){console.error("Error fetching caregiver ID:",e),C("Failed to fetch caregiver data")}})()},[e]),(0,i.useEffect)(()=>{(async function(){if(S)try{_(!0),C(null);let{data:e,error:s}=await x.OQ.from("specialist_caregiver").select("\n            specialist:specialists (\n              id,\n              name,\n              email,\n              business_name,\n              verification_status,\n              last_sign_in_at\n            )\n          ").eq("caregiver_id",S);if(s)throw s;if(!e)return;let t=e.map(e=>{let{specialist:s}=e;return{specialist_id:s.id,name:s.name||"",email:s.email,business_name:s.business_name,verification_status:s.verification_status,last_activity:s.last_sign_in_at}});a(t),y(t)}catch(e){console.error("Error loading specialists:",e),C("Failed to load specialists")}finally{_(!1)}})()},[S]),(0,i.useEffect)(()=>{let e=[...s];E&&(e=e.filter(e=>{var s;return e.name.toLowerCase().includes(E.toLowerCase())||(null===(s=e.business_name)||void 0===s?void 0:s.toLowerCase().includes(E.toLowerCase()))===!0})),e.sort((e,s)=>{switch(L){case"name":return e.name.localeCompare(s.name);case"recent":return new Date(s.last_activity||"").getTime()-new Date(e.last_activity||"").getTime();case"business":var a;return(null===(a=e.business_name)||void 0===a?void 0:a.localeCompare(s.business_name||""))||0;default:return 0}}),y(e)},[s,E,L]);let M=N.slice((P-1)*9,9*P),Q=Math.ceil(N.length/9);return b?(0,t.jsx)("div",{className:"flex-1 p-8",children:(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[...Array(6)].map((e,s)=>(0,t.jsxs)(h.Zb,{className:"animate-pulse",children:[(0,t.jsxs)(h.Ol,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-muted rounded w-3/4"}),(0,t.jsx)("div",{className:"h-3 bg-muted rounded w-1/2"})]}),(0,t.jsx)(h.aY,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-3 bg-muted rounded"}),(0,t.jsx)("div",{className:"h-3 bg-muted rounded w-5/6"})]})})]},s))})})}):w?(0,t.jsx)("div",{className:"flex-1 p-8",children:(0,t.jsxs)("div",{className:"rounded-lg border border-destructive bg-destructive/10 p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-destructive",children:"Error Loading Specialists"}),(0,t.jsx)("p",{className:"text-sm text-destructive/80 mt-1",children:w})]})}):0===s.length?(0,t.jsx)("div",{className:"flex-1 p-8",children:(0,t.jsx)("div",{className:"rounded-lg border bg-card p-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,t.jsx)("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:(0,t.jsx)(r.Z,{className:"h-6 w-6 text-primary"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"No Specialists Found"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-2 max-w-sm",children:"You don't have any sleep specialists assigned to you yet. Please contact support if you need assistance."})]})})}):(0,t.jsxs)("div",{className:"flex-1 p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(l.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(f.I,{placeholder:"Search specialists...",value:E,onChange:e=>I(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(g.Ph,{value:L,onValueChange:O,children:[(0,t.jsx)(g.i4,{className:"w-[180px]",children:(0,t.jsx)(g.ki,{placeholder:"Sort by..."})}),(0,t.jsxs)(g.Bw,{children:[(0,t.jsx)(g.Ql,{value:"name",children:"Sort by Name"}),(0,t.jsx)(g.Ql,{value:"recent",children:"Sort by Recent"}),(0,t.jsx)(g.Ql,{value:"business",children:"Sort by Business"})]})]})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:M.map(e=>(0,t.jsxs)(h.Zb,{className:"relative",children:[(0,t.jsx)(h.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(r.Z,{className:"h-6 w-6 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(h.ll,{className:"text-lg",children:e.name}),(0,t.jsxs)(h.SZ,{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"text-xs",children:e.business_name})]})]})]}),(0,t.jsx)(j.C,{variant:"verified"===e.verification_status?"default":"secondary",children:e.verification_status})]})}),(0,t.jsx)(h.aY,{children:(0,t.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Last active ",(0,o.ZP)(new Date(e.last_activity||""),"h:mm a")]})]}),(0,t.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,t.jsxs)(v.z,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>{},children:[(0,t.jsx)(r.Z,{className:"h-4 w-4"}),"Profile"]}),(0,t.jsxs)(v.z,{variant:"secondary",size:"sm",className:"flex items-center gap-2",onClick:()=>{S&&z({specialistId:e.specialist_id,caregiverId:S,specialistName:e.name})},children:[(0,t.jsx)(u.Z,{className:"h-4 w-4"}),"Chat"]})]})]})})]},e.specialist_id))}),Q>1&&(0,t.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,t.jsx)(v.z,{variant:"outline",size:"sm",onClick:()=>q(e=>Math.max(1,e-1)),disabled:1===P,children:"Previous"}),[...Array(Q)].map((e,s)=>(0,t.jsx)(v.z,{variant:P===s+1?"default":"outline",size:"sm",onClick:()=>q(s+1),children:s+1},s+1)),(0,t.jsx)(v.z,{variant:"outline",size:"sm",onClick:()=>q(e=>Math.min(Q,e+1)),disabled:P===Q,children:"Next"})]})]}),k&&(0,t.jsx)(p.z,{specialistId:k.specialistId,caregiverId:k.caregiverId,caregiverName:k.specialistName,onClose:()=>z(null)})]})}},9155:function(e,s,a){"use strict";a.d(s,{C:function(){return n}});var t=a(7437);a(2265);var i=a(6061),r=a(9311);let l=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:a,...i}=e;return(0,t.jsx)("div",{className:(0,r.cn)(l({variant:a}),s),...i})}}},function(e){e.O(0,[985,566,539,819,783,650,747,375,102,971,864,744],function(){return e(e.s=390)}),_N_E=e.O()}]);